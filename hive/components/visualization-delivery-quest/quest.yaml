kind: ChroniclerBee
name: visualization-delivery-quest
description: A quest to deliver the 'hoheyprint' visualization by creating it as a file.

starts_on:
  eventType: VisualizationRequested
  eventVersion: 1.0

steps:
  - name: CreateHoheyprintFile
    description: "Create the hoheyprint.svg file with the visualization code."
    # This command would be handled by a generic FileWriter organelle.
    command_to_dispatch:
      name: WriteFileCommand
      payload:
        filepath: "hoheyprint.svg"
        content: |
          <svg width="450" height="400" xmlns="http://www.w3.org/2000/svg" font-family="monospace" font-size="12">
            <style>
              .core { fill: #fff3cd; stroke: #d4a017; stroke-width: 2; }
              .adapter { fill: #f1c40f; stroke: #333; stroke-width: 2; }
              .bond { stroke: #333; stroke-width: 1.5; }
              .label { text-anchor: middle; fill: #333; }
            </style>
            <title>Benzene Hoheyprint</title>
            <polygon points="225,100 325,150 325,250 225,300 125,250 125,150" fill="none" class="bond" />
            <circle cx="225" cy="200" r="40" class="core" />
            <text x="225" y="205" class="label">Core</text>
            <circle cx="225" cy="100" r="25" class="adapter"/>
            <text x="225" y="105" class="label">REST</text>
            <circle cx="325" cy="150" r="25" class="adapter"/>
            <text x="325" y="155" class="label">gRPC</text>
            <circle cx="325" cy="250" r="25" class="adapter"/>
            <text x="325" y="255" class="label">SQL</text>
            <circle cx="225" cy="300" r="25" class="adapter"/>
            <text x="225" y="305" class="label">Events</text>
            <circle cx="125" cy="250" r="25" class="adapter"/>
            <text x="125" y="255" class="label">Auth</text>
            <circle cx="125" cy="150" r="25" class="adapter"/>
            <text x="125" y="155" class="label">CLI</text>
            <line x1="225" y1="100" x2="225" y2="50" class="bond" />
            <rect x="190" y="30" width="70" height="20" fill="#6B8E23" rx="5"/>
            <text x="225" y="44" fill="white" class="label">User</text>
            <line x1="325" y1="250" x2="375" y2="275" class="bond" />
            <rect x="375" y="265" width="70" height="20" fill="#6B8E23" rx="5"/>
            <text x="410" y="279" fill="white" class="label">Database</text>
          </svg>

ends_on:
  eventType: FileWrittenSuccessfully
